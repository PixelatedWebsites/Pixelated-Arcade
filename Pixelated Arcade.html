<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Pixelated Arcade</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      color:#fff;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:100vh;
      background:
        radial-gradient(circle at 10% 20%, #3a3b5c 0, transparent 40%),
        radial-gradient(circle at 80% 80%, #1e88e5 0, transparent 45%),
        radial-gradient(circle at 50% 0%, #8e24aa 0, transparent 40%),
        #02030a;
      background-attachment: fixed;
      overflow-x:hidden;
    }
    h2 {
      margin: 16px 0 8px;
      letter-spacing: 2px;
      text-transform: uppercase;
      font-weight: 700;
      text-shadow: 0 0 8px rgba(0,255,255,0.4);
    }
    #nav {
      margin: 10px;
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      justify-content:center;
    }
    #nav button {
      padding:6px 10px;
      border:none;
      cursor:pointer;
      background:rgba(15,20,40,0.9);
      color:#fff;
      border-radius:999px;
      border:1px solid rgba(0,255,255,0.3);
      font-size:13px;
      transition:background 0.15s, transform 0.1s, box-shadow 0.15s;
      box-shadow:0 0 4px rgba(0,0,0,0.7);
    }
    #nav button:hover {
      background:rgba(30,40,80,0.95);
      transform:translateY(-1px);
      box-shadow:0 0 8px rgba(0,255,255,0.4);
    }
    #nav button.active {
      background:linear-gradient(135deg,#e91e63,#ff9800);
      border-color:rgba(255,255,255,0.6);
      box-shadow:0 0 10px rgba(233,30,99,0.7);
    }

    #shell {
      margin:10px;
      padding:12px;
      width:440px;
      max-width:100vw;
      border-radius:18px;
      border:1px solid rgba(255,255,255,0.18);
      background:linear-gradient(135deg,rgba(5,8,25,0.96),rgba(10,20,45,0.96));
      box-shadow:
        0 0 25px rgba(0,0,0,0.8),
        0 0 40px rgba(0,255,255,0.15);
      display:flex;
      flex-direction:column;
      gap:8px;
      position:relative;
    }

    #shell-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:13px;
      color:#cfd8dc;
    }
    #shell-header span.label {
      text-transform:uppercase;
      letter-spacing:1px;
      font-size:11px;
      opacity:0.8;
    }
    #game-clock {
      font-family:monospace;
      font-size:13px;
      color:#80deea;
    }

    #game-area {
      margin-top:4px;
      width:100%;
      min-height:420px;
      display:flex;
      justify-content:center;
      align-items:center;
      background:radial-gradient(circle at 20% 0%,rgba(255,255,255,0.08),transparent 45%),
                 radial-gradient(circle at 80% 100%,rgba(0,255,255,0.14),transparent 50%),
                 #050816;
      border-radius:14px;
      border:1px solid rgba(120,144,156,0.7);
      position:relative;
      overflow:hidden;
    }

    /* translucent restart overlay */
    #overlay {
      position:absolute;
      inset:0;
      background:rgba(3,7,30,0.65);
      display:flex;
      justify-content:center;
      align-items:center;
      pointer-events:none; /* enabled per game via JS */
      opacity:0;
      transition:opacity 0.2s;
    }
    #overlay.visible {
      opacity:1;
      pointer-events:auto;
    }
    #overlay-inner {
      padding:10px 20px;
      border-radius:999px;
      border:1px solid rgba(0,255,255,0.7);
      background:rgba(5,15,40,0.85);
      color:#e0f7fa;
      cursor:pointer;
      box-shadow:0 0 12px rgba(0,255,255,0.7);
      font-size:13px;
    }

    .hidden { display:none; }
    .center { text-align:center; width:100%; }

    /* Game 1 */
    #g1-container { position:relative; width:400px; height:320px; margin:0 auto; }
    #g1-target {
      position:absolute;
      width:40px;
      height:40px;
      background:radial-gradient(circle,#ffeb3b 0,#ff9800 40%,#e91e63 100%);
      cursor:pointer;
      box-shadow:0 0 10px rgba(255,193,7,0.9);
      border-radius:8px;
    }

    /* Game 2 */
    #g2-box {
      width:200px; height:200px;
      background:#263238;
      display:flex; align-items:center; justify-content:center;
      cursor:pointer; border-radius:12px;
      border:1px solid rgba(0,255,255,0.4);
      box-shadow:0 0 10px rgba(0,255,255,0.35);
    }

    /* Game 3 */
    #g3 input {
      width:70px;
      border-radius:999px;
      border:1px solid #546e7a;
      padding:4px 6px;
      background:#102027;
      color:#fff;
      text-align:center;
    }
    #g3-btn {
      padding:4px 10px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background:#26c6da;
      color:#041016;
      font-weight:600;
    }

    /* Game 4 */
    #g4-field {
      position:relative;
      width:400px; height:340px;
      border-radius:12px;
      overflow:hidden;
      background:radial-gradient(circle at 10% 0%,#1a237e,transparent 50%),
                 radial-gradient(circle at 90% 100%,#00695c,transparent 50%),
                 #000016;
    }
    #g4-player {
      width:30px; height:30px;
      background:radial-gradient(circle,#b2ff59 0,#4caf50 60%,#1b5e20 100%);
      position:absolute; border-radius:50%;
      box-shadow:0 0 10px rgba(178,255,89,0.9);
    }
    .g4-enemy {
      width:20px; height:20px;
      background:radial-gradient(circle,#ff8a80 0,#f44336 50%,#b71c1c 100%);
      position:absolute; border-radius:50%;
      box-shadow:0 0 10px rgba(244,67,54,0.9);
    }

    /* Game 5 */
    #g5-word { font-size:24px; margin-bottom:10px; letter-spacing:2px; }
    #g5-input {
      border-radius:999px;
      border:1px solid #546e7a;
      padding:4px 10px;
      background:#102027;
      color:#fff;
    }
    #g5-btn {
      padding:4px 10px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background:#ab47bc;
      color:#fff;
      margin-left:4px;
      font-weight:600;
    }

    /* Game 6 */
    #g6-btn {
      padding:12px 20px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background:linear-gradient(135deg,#26c6da,#00e676);
      color:#021212;
      font-weight:700;
      box-shadow:0 0 10px rgba(0,255,127,0.7);
      position:relative;
      overflow:hidden;
    }
    .click-ripple {
      position:absolute;
      border-radius:50%;
      transform:scale(0);
      opacity:0.8;
      pointer-events:none;
      background:radial-gradient(circle, rgba(255,255,255,0.9) 0, rgba(255,255,255,0) 60%);
      animation:ripple 0.4s ease-out forwards;
    }
    @keyframes ripple {
      to { transform:scale(6); opacity:0; }
    }

    /* Game 7 */
    #g7-color-box {
      width:150px; height:150px;
      margin:10px auto;
      border-radius:18px;
      box-shadow:0 0 15px rgba(0,0,0,0.8);
    }
    #g7-input {
      border-radius:999px;
      border:1px solid #546e7a;
      padding:4px 10px;
      background:#102027;
      color:#fff;
    }
    #g7-btn {
      padding:4px 10px;
      border-radius:999px;
      border:none;
      cursor:pointer;
      background:#ffca28;
      color:#3e2723;
      margin-left:4px;
      font-weight:600;
    }

    /* Game 8 */
    #g8-board {
      display:grid;
      grid-template-columns:repeat(3,80px);
      grid-template-rows:repeat(3,80px);
      gap:4px;
      justify-content:center;
      margin-bottom:10px;
    }
    .g8-cell {
      background:radial-gradient(circle at 30% 20%,#455a64,#263238 40%,#000 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      font-size:32px;
      cursor:pointer;
      border-radius:10px;
      box-shadow:0 0 8px rgba(0,0,0,0.8);
    }
  </style>
</head>
<body>
  <h2>PIXELATED ARCADE</h2>
  <div id="nav">
    <button data-game="g1" class="active">1) Click Square</button>
    <button data-game="g2">2) Reaction</button>
    <button data-game="g3">3) Guess #</button>
    <button data-game="g4">4) Avoid</button>
    <button data-game="g5">5) Type</button>
    <button data-game="g6">6) Clicker</button>
    <button data-game="g7">7) Color</button>
    <button data-game="g8">8) TicTacToe</button>
  </div>

  <div id="shell">
    <div id="shell-header">
      <span class="label">Game Stopwatch</span>
      <span id="game-clock">00:00.0</span>
    </div>

    <div id="game-area">
      <!-- translucent restart overlay -->
      <div id="overlay">
        <div id="overlay-inner">Restart game</div>
      </div>

      <!-- Game 1: Click the Square -->
      <div id="g1" class="game">
        <div id="g1-container">
          <div id="g1-target"></div>
        </div>
        <div class="center">
          Score: <span id="g1-score">0</span> |
          Time: <span id="g1-time">30</span>s
        </div>
        <div class="center" id="g1-result"></div>
      </div>

      <!-- Game 2: Reaction Timer -->
      <div id="g2" class="game hidden">
        <div class="center">
          <div id="g2-box">Click when green</div>
          <p id="g2-info">Press the box to start.</p>
        </div>
      </div>

      <!-- Game 3: Number Guess -->
      <div id="g3" class="game hidden center">
        <p>Guess a number 1â€“20</p>
        <input type="number" id="g3-input" min="1" max="20">
        <button id="g3-btn">Guess</button>
        <p id="g3-msg"></p>
      </div>

      <!-- Game 4: Click Avoider -->
      <div id="g4" class="game hidden">
        <div id="g4-field">
          <div id="g4-player"></div>
        </div>
        <div class="center">Time alive: <span id="g4-time">0.0</span>s</div>
        <div class="center" id="g4-msg"></div>
      </div>

      <!-- Game 5: Type the Word -->
      <div id="g5" class="game hidden center">
        <div id="g5-word"></div>
        <input id="g5-input" placeholder="Type here">
        <button id="g5-btn">Submit</button>
        <p>Correct: <span id="g5-score">0</span></p>
      </div>

      <!-- Game 6: Counter Clicker -->
      <div id="g6" class="game hidden center">
        <p>Clicks: <span id="g6-count">0</span></p>
        <button id="g6-btn">Click me fast!</button>
      </div>

      <!-- Game 7: Color Guess -->
      <div id="g7" class="game hidden center">
        <p>Guess the color name:</p>
        <div id="g7-color-box"></div>
        <input id="g7-input" placeholder="red, green, blue...">
        <button id="g7-btn">Guess</button>
        <p id="g7-msg"></p>
      </div>

      <!-- Game 8: Tic Tac Toe (simple) -->
      <div id="g8" class="game hidden center">
        <div id="g8-board"></div>
        <p id="g8-status">X's turn</p>
        <button id="g8-reset">Reset</button>
      </div>
    </div>
  </div>

  <script>
    // Stopwatch + game switching + reset on leave
    const gameClockEl = document.getElementById('game-clock');
    const buttons = document.querySelectorAll('#nav button');
    const games = document.querySelectorAll('.game');
    const overlay = document.getElementById('overlay');
    const overlayInner = document.getElementById('overlay-inner');

    const gameTimes = { g1:0,g2:0,g3:0,g4:0,g5:0,g6:0,g7:0,g8:0 };
    let currentGameId = 'g1';
    let lastTick = performance.now();
    let stopwatchRunning = false;

    function formatTime(ms) {
      const totalSec = ms / 1000;
      const m = Math.floor(totalSec / 60);
      const s = Math.floor(totalSec % 60);
      const t = Math.floor((totalSec * 10) % 10);
      return (m<10?'0'+m:m)+':' + (s<10?'0'+s:s)+'.'+t;
    }
    function tickClock(now) {
      const dt = now - lastTick;
      lastTick = now;
      if (stopwatchRunning) {
        gameTimes[currentGameId] += dt;
        gameClockEl.textContent = formatTime(gameTimes[currentGameId]);
      }
      requestAnimationFrame(tickClock);
    }
    requestAnimationFrame(tickClock);

    function resetGameWatch(id) {
      gameTimes[id] = 0;
      if (id === currentGameId) gameClockEl.textContent = formatTime(0);
    }

    // hooks: each game exposes a reset function
    const gameReset = {};

    function showOverlay() {
      overlay.classList.add('visible');
    }
    function hideOverlay() {
      overlay.classList.remove('visible');
    }

    buttons.forEach(btn => {
      btn.addEventListener('click', () => {
        const newId = btn.dataset.game;
        if (newId === currentGameId) return;

        // reset the game we are leaving
        if (gameReset[currentGameId]) gameReset[currentGameId]();

        buttons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        games.forEach(g => g.classList.add('hidden'));
        document.getElementById(newId).classList.remove('hidden');

        currentGameId = newId;
        lastTick = performance.now();
        resetGameWatch(newId);
        stopwatchRunning = false;
        hideOverlay();
      });
    });

    overlayInner.addEventListener('click', () => {
      if (gameReset[currentGameId]) gameReset[currentGameId]();
      resetGameWatch(currentGameId);
      stopwatchRunning = false;
      hideOverlay();
    });

    // Game 1: Click the Square
    (function(){
      const container = document.getElementById('g1-container');
      const target = document.getElementById('g1-target');
      const scoreEl = document.getElementById('g1-score');
      const timeEl = document.getElementById('g1-time');
      const resultEl = document.getElementById('g1-result');
      let score, timeLeft, over, timerId;

      function placeTargetCenter() {
        const maxX = container.clientWidth - target.clientWidth;
        const maxY = container.clientHeight - target.clientHeight;
        target.style.left = Math.floor(Math.random()*maxX) + 'px';
        target.style.top = Math.floor(Math.random()*maxY) + 'px';
      }

      function startRound() {
        score = 0;
        timeLeft = 30;
        over = false;
        scoreEl.textContent = score;
        timeEl.textContent = timeLeft;
        resultEl.textContent = '';
        target.style.display = 'block';
        placeTargetCenter();
        resetGameWatch('g1');
        stopwatchRunning = true;
        timerId = setInterval(()=>{
          if (over) return;
          timeLeft--;
          timeEl.textContent = timeLeft;
          if (timeLeft<=0) {
            over = true;
            clearInterval(timerId);
            stopwatchRunning = false;
            target.style.display = 'none';
            resultEl.textContent = 'Game 1 over! Score: ' + score;
            showOverlay(); // show restart overlay
          }
        },1000);
      }

      target.addEventListener('click',()=>{
        if (over) return;
        score++;
        scoreEl.textContent = score;
        placeTargetCenter();
      });

      gameReset.g1 = function(){
        clearInterval(timerId);
        score = 0;
        timeLeft = 30;
        over = false;
        scoreEl.textContent = '0';
        timeEl.textContent = '30';
        resultEl.textContent = '';
        target.style.display = 'block';
        placeTargetCenter();
      };

      // initial state
      startRound();
    })();

    // Game 2: Reaction
    (function(){
      const box = document.getElementById('g2-box');
      const info = document.getElementById('g2-info');
      let waiting = false, ready = false, timeoutId;

      function resetInternal() {
        box.style.background = '#263238';
        box.textContent = 'Click when green';
        info.textContent = 'Press the box to start.';
        waiting = false;
        ready = false;
        stopwatchRunning = false;
        resetGameWatch('g2');
        clearTimeout(timeoutId);
      }

      box.addEventListener('click',()=>{
        if (!waiting && !ready) {
          waiting = true;
          box.textContent = 'Wait for green...';
          info.textContent = '';
          timeoutId = setTimeout(()=>{
            box.style.background = '#4caf50';
            box.textContent = 'CLICK!';
            ready = true;
            waiting = false;
            currentGameId = 'g2';
            resetGameWatch('g2');
            stopwatchRunning = true;
          },1000 + Math.random()*2000);
        } else if (ready) {
          stopwatchRunning = false;
          info.textContent = 'Nice! Check the stopwatch.';
          resetInternal();
        } else if (waiting) {
          info.textContent = 'Too soon! Try again.';
          resetInternal();
        }
      });

      gameReset.g2 = function(){
        resetInternal();
      };

      resetInternal();
    })();

    // Game 3: Number Guess
    (function(){
      const input = document.getElementById('g3-input');
      const btn = document.getElementById('g3-btn');
      const msg = document.getElementById('g3-msg');
      let secret, started;

      function newSecret() {
        secret = Math.floor(Math.random()*20)+1;
        started = false;
        msg.textContent = '';
        input.value = '';
      }

      btn.addEventListener('click',()=>{
        const val = Number(input.value);
        if (!val) return;
        if (!started) {
          currentGameId = 'g3';
          resetGameWatch('g3');
          stopwatchRunning = true;
          started = true;
        }
        if (val === secret) {
          msg.textContent = 'Correct! New number set.';
          stopwatchRunning = false;
          newSecret();
        } else if (val < secret) {
          msg.textContent = 'Too low.';
        } else {
          msg.textContent = 'Too high.';
        }
        input.value = '';
      });

      gameReset.g3 = function(){
        newSecret();
        stopwatchRunning = false;
        resetGameWatch('g3');
      };

      newSecret();
    })();

    // Game 4: Avoid (homing, faster, more dots)
    (function(){
      const field = document.getElementById('g4-field');
      const player = document.getElementById('g4-player');
      const timeEl = document.getElementById('g4-time');
      const msgEl = document.getElementById('g4-msg');
      let enemies = [];
      let startTime = 0;
      let alive = false;

      function spawnEnemies() {
        enemies.forEach(e=>e.remove());
        enemies = [];
        const count = 10;
        for (let i=0;i<count;i++){
          const e = document.createElement('div');
          e.className = 'g4-enemy';
          e.style.left = Math.random()*380 + 'px';
          e.style.top = Math.random()*320 + 'px';
          field.appendChild(e);
          enemies.push({el:e, vx:0, vy:0});
        }
      }

      field.addEventListener('mousemove',e=>{
        if (!alive) {
          alive = true;
          currentGameId = 'g4';
          resetGameWatch('g4');
          stopwatchRunning = true;
          startTime = performance.now();
          msgEl.textContent = '';
        }
        const rect = field.getBoundingClientRect();
        const x = e.clientX - rect.left - 15;
        const y = e.clientY - rect.top - 15;
        player.style.left = Math.max(0,Math.min(370,x)) + 'px';
        player.style.top  = Math.max(0,Math.min(310,y)) + 'px';
      });

      function loop() {
        const now = performance.now();
        if (alive) {
          timeEl.textContent = ((now-startTime)/1000).toFixed(1);
        }
        const px = parseFloat(player.style.left)||185;
        const py = parseFloat(player.style.top)||155;
        enemies.forEach(obj=>{
          const e = obj.el;
          const ex = parseFloat(e.style.left);
          const ey = parseFloat(e.style.top);
          let dx = px - ex;
          let dy = py - ey;
          const dist = Math.sqrt(dx*dx+dy*dy) || 1;
          dx /= dist; dy /= dist;
          const speed = 2.5; // faster
          let nx = ex + dx*speed;
          let ny = ey + dy*speed;
          nx = Math.max(0,Math.min(380,nx));
          ny = Math.max(0,Math.min(320,ny));
          e.style.left = nx + 'px';
          e.style.top  = ny + 'px';

          if (alive && Math.abs(px-nx)<20 && Math.abs(py-ny)<20) {
            alive = false;
            stopwatchRunning = false;
            msgEl.textContent = 'Hit! You survived ' + timeEl.textContent + 's. Use Restart to try again.';
          }
        });
        requestAnimationFrame(loop);
      }

      function resetInternal() {
        player.style.left = '185px';
        player.style.top  = '155px';
        alive = false;
        startTime = performance.now();
        timeEl.textContent = '0.0';
        msgEl.textContent = '';
        spawnEnemies();
        stopwatchRunning = false;
        resetGameWatch('g4');
      }

      gameReset.g4 = resetInternal;
      resetInternal();
      loop();
    })();

    // Game 5: Type the Word (no "space", more coding words)
    (function(){
      const words = [
        'javascript','python','rust','golang','java',
        'typescript','react','node','express','django',
        'binary','compile','function','variable','array',
        'pointer','class','object','interface','promise'
      ];
      const wordEl = document.getElementById('g5-word');
      const input = document.getElementById('g5-input');
      const btn = document.getElementById('g5-btn');
      const scoreEl = document.getElementById('g5-score');
      let current = '';
      let started = false;

      function newWord() {
        current = words[Math.floor(Math.random()*words.length)];
        wordEl.textContent = current.toUpperCase();
        input.value = '';
        input.focus();
      }

      btn.addEventListener('click',()=>{
        if (!started) {
          currentGameId = 'g5';
          resetGameWatch('g5');
          stopwatchRunning = true;
          started = true;
        }
        if (input.value.trim().toLowerCase() === current) {
          let score = Number(scoreEl.textContent)||0;
          score++;
          scoreEl.textContent = score;
        }
        newWord();
      });

      function resetInternal() {
        scoreEl.textContent = '0';
        started = false;
        stopwatchRunning = false;
        resetGameWatch('g5');
        newWord();
      }

      gameReset.g5 = resetInternal;
      resetInternal();
    })();

    // Game 6: Counter Clicker (ripple + overlay restart from here, no own button)
    (function(){
      const btn = document.getElementById('g6-btn');
      const countEl = document.getElementById('g6-count');
      let count = 0;
      let started = false;

      btn.addEventListener('click', (e)=>{
        if (!started) {
          currentGameId = 'g6';
          resetGameWatch('g6');
          stopwatchRunning = true;
          started = true;
        }
        count++;
        countEl.textContent = count;

        const rect = btn.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;
        const ripple = document.createElement('span');
        ripple.className = 'click-ripple';
        ripple.style.left = (x-5)+'px';
        ripple.style.top  = (y-5)+'px';
        ripple.style.width = ripple.style.height = '10px';
        btn.appendChild(ripple);
        setTimeout(()=>ripple.remove(),400);

        // show restart overlay from this game
        showOverlay();
      });

      function resetInternal() {
        count = 0;
        countEl.textContent = '0';
        started = false;
        stopwatchRunning = false;
        resetGameWatch('g6');
      }

      gameReset.g6 = resetInternal;
      resetInternal();
    })();

    // Game 7: Color Guess (must fill textbox before guess)
    (function(){
      const colors = ['red','green','blue','yellow','purple','orange','cyan','magenta','lime'];
      const box = document.getElementById('g7-color-box');
      const input = document.getElementById('g7-input');
      const btn = document.getElementById('g7-btn');
      const msg = document.getElementById('g7-msg');
      let current = '';
      let started = false;

      function newColor() {
        current = colors[Math.floor(Math.random()*colors.length)];
        box.style.background = current;
        msg.textContent = '';
        input.value = '';
        input.focus();
      }

      btn.addEventListener('click',()=>{
        const guess = input.value.trim().toLowerCase();
        if (!guess) {
          msg.textContent = 'Type a color first.';
          return;
        }
        if (!started) {
          currentGameId = 'g7';
          resetGameWatch('g7');
          stopwatchRunning = true;
          started = true;
        }
        if (guess === current) {
          msg.textContent = 'Correct!';
        } else {
          msg.textContent = 'Nope, it was ' + current;
        }
        stopwatchRunning = false;
        started = false;
        newColor();
      });

      function resetInternal() {
        started = false;
        stopwatchRunning = false;
        resetGameWatch('g7');
        msg.textContent = '';
        newColor();
      }

      gameReset.g7 = resetInternal;
      resetInternal();
    })();

    // Game 8: Tic Tac Toe
    (function(){
      const boardEl = document.getElementById('g8-board');
      const statusEl = document.getElementById('g8-status');
      const resetBtn = document.getElementById('g8-reset');
      let board, current, over, started;
      const wins = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];

      function render() {
        boardEl.innerHTML = '';
        board.forEach((val,i)=>{
          const cell = document.createElement('div');
          cell.className = 'g8-cell';
          cell.textContent = val;
          cell.addEventListener('click',()=>move(i));
          boardEl.appendChild(cell);
        });
      }

      function move(i) {
        if (over || board[i]) return;
        if (!started) {
          currentGameId = 'g8';
          resetGameWatch('g8');
          stopwatchRunning = true;
          started = true;
        }
        board[i] = current;
        if (checkWin(current)) {
          statusEl.textContent = current + ' wins!';
          over = true;
          stopwatchRunning = false;
        } else if (board.every(c=>c)) {
          statusEl.textContent = 'Draw!';
          over = true;
          stopwatchRunning = false;
        } else {
          current = current==='X'?'O':'X';
          statusEl.textContent = current + "'s turn";
        }
        render();
      }

      function checkWin(p) {
        return wins.some(w => w.every(i => board[i] === p));
      }

      function resetInternal() {
        board = Array(9).fill('');
        current = 'X';
        over = false;
        started = false;
        statusEl.textContent = "X's turn";
        stopwatchRunning = false;
        resetGameWatch('g8');
        render();
      }

      resetBtn.addEventListener('click', resetInternal);
      gameReset.g8 = resetInternal;
      resetInternal();
    })();
  </script>
</body>
</html>